<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Box 73 - Painel da Oficina</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ”§</text></svg>">
</head>

<body>
    <div id="app">
        <section id="oficina-panel" class="screen active">
            <div class="container">
                <div class="brand-container">
                    <h1 class="brand-title">Box 73</h1>
                    <p class="brand-subtitle">ðŸ”§ Painel da Oficina</p>
                </div>

                <!-- Tabs -->
                <div class="tabs">
                    <button class="tab active" data-tab="tab-dashboard">ðŸ“Š Dashboard</button>
                    <button class="tab" data-tab="tab-cadastro">âž• Cadastrar</button>
                    <button class="tab" data-tab="tab-validar">ðŸŽ« Validar Cupom</button>
                </div>

                <!-- Tab: Dashboard -->
                <div id="tab-dashboard" class="tab-content active">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">ðŸ‘¥</div>
                            <div class="stat-content">
                                <div class="stat-value" id="office-total-ambassadors">0</div>
                                <div class="stat-label">Embaixadores</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">ðŸŽ«</div>
                            <div class="stat-content">
                                <div class="stat-value" id="office-total-referrals">0</div>
                                <div class="stat-label">Cupons Usados</div>
                            </div>
                        </div>
                        <div class="stat-card accent-card">
                            <div class="stat-icon">ðŸ“ˆ</div>
                            <div class="stat-content">
                                <div class="stat-value" id="office-conversion-rate">0%</div>
                                <div class="stat-label">Taxa ConversÃ£o</div>
                            </div>
                        </div>
                    </div>

                    <h2 class="section-subtitle">Embaixadores Cadastrados</h2>
                    <div id="ambassadors-list" class="ambassadors-list">
                        <!-- Preenchido via JS -->
                    </div>

                    <h2 class="section-subtitle" style="margin-top: var(--spacing-2xl);">Ãšltimos Cupons Validados</h2>
                    <div id="recent-referrals-list" class="referrals-list">
                        <!-- Preenchido via JS -->
                    </div>
                </div>

                <!-- Tab: Cadastrar Embaixador -->
                <div id="tab-cadastro" class="tab-content">
                    <div class="form-card">
                        <h2 class="section-subtitle">Cadastrar Novo Embaixador</h2>
                        <p class="form-description">Preencha os dados do cliente que serÃ¡ embaixador da Box 73.</p>

                        <div class="input-group">
                            <label>Nome Completo *</label>
                            <input type="text" id="register-name" placeholder="Ex: JoÃ£o da Silva" class="input-field">
                        </div>

                        <div class="input-group">
                            <label>CPF *</label>
                            <input type="text" id="register-cpf" placeholder="000.000.000-00" class="input-field" maxlength="14">
                        </div>

                        <div class="input-group">
                            <label>Celular / WhatsApp *</label>
                            <input type="tel" id="register-phone" placeholder="(00) 00000-0000" class="input-field" maxlength="15">
                        </div>

                        <div class="input-group">
                            <label>CÃ³digo do Cupom *</label>
                            <div class="input-with-action">
                                <input type="text" id="register-coupon" placeholder="Ex: JOAO73" class="input-field" style="text-transform: uppercase;">
                                <button class="btn btn-secondary btn-sm" id="btn-generate-code">Gerar Auto</button>
                            </div>
                            <small class="input-hint">Cupom que o embaixador vai compartilhar</small>
                        </div>

                        <button class="btn btn-primary btn-large" id="btn-register">Cadastrar Embaixador</button>
                    </div>
                </div>

                <!-- Tab: Validar Cupom -->
                <div id="tab-validar" class="tab-content">
                    <div class="form-card">
                        <h2 class="section-subtitle">Validar Cupom de IndicaÃ§Ã£o</h2>
                        <p class="form-description">Digite o cÃ³digo do cupom que o cliente apresentou.</p>

                        <div class="search-box">
                            <input type="text" id="search-coupon" placeholder="Digite o cÃ³digo do cupom..." class="search-input">
                            <button class="btn btn-primary" id="btn-validate">Validar</button>
                        </div>

                        <div id="validation-result" class="validation-result" style="display: none;"></div>

                        <div id="use-coupon-form" class="use-form" style="display: none;">
                            <h3 class="section-subtitle">Registrar Uso do Cupom</h3>

                            <div class="input-group">
                                <label>Nome do Cliente Indicado *</label>
                                <input type="text" id="indicado-name" placeholder="Nome completo" class="input-field">
                            </div>

                            <div class="input-group">
                                <label>Telefone do Indicado</label>
                                <input type="tel" id="indicado-phone" placeholder="(00) 00000-0000" class="input-field">
                            </div>

                            <div class="input-group">
                                <label>Valor do Desconto (%)</label>
                                <input type="number" id="discount-value" value="10" min="0" max="100" class="input-field">
                            </div>

                            <div class="input-group">
                                <label>ServiÃ§o Realizado</label>
                                <textarea id="observations" placeholder="Ex: RevisÃ£o completa, troca de Ã³leo..." class="input-field" rows="3"></textarea>
                            </div>

                            <button class="btn btn-primary btn-large" id="btn-mark-used">âœ… Confirmar e Registrar</button>
                        </div>
                    </div>
                </div>

                <!-- Link do cliente -->
                <div class="client-link-banner">
                    <p>ðŸ“± Link para clientes consultarem seus cupons:</p>
                    <div class="link-display">
                        <span id="client-link-url"></span>
                        <button class="btn btn-secondary btn-sm" id="btn-copy-client-link">Copiar</button>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast"></div>

    <!-- Loading -->
    <div id="loading-overlay" class="loading-overlay" style="display: none;">
        <div class="spinner"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="config.js"></script>
    <script src="app.js"></script>
</body>

</html>
